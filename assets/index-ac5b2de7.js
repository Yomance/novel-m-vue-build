import{d as $,r as p,h as O,x as F,e as g,j as V,o as k,c as H,u as j,g as P,w,F as q,f as z,b as W,t as N,_ as A}from"./index-b21a5062.js";import{s as J,d as X}from"./comment-70eb98cb.js";import{b as G,c as K}from"./function-call-eb60fd77.js";import{c as Q,m as Y,n as I,M,a1 as Z,b as ee,y as te,p as oe,D as se,J as ae,w as ne}from"./file-5968fc18.js";import{u as le,d as re,B as ce}from"./index-1ab0a0de.js";import{N as ie}from"./index-b72d0545.js";import{L as fe}from"./index-8dc16f5c.js";import{s as ue}from"./index-9167eec7.js";import{E as de}from"./index-551b3d01.js";import{C as me}from"./index-7cf97704.js";import"./use-id-c0295969.js";const[pe,S]=Q("swipe-cell"),ge={name:Y(""),disabled:Boolean,leftWidth:I,rightWidth:I,beforeClose:Function,stopPropagation:Boolean};var he=$({name:pe,props:ge,emits:["open","close","click"],setup(s,{emit:h,slots:f}){let n,u,d;const _=p(),m=p(),y=p(),t=O({offset:0,dragging:!1}),o=le(),l=e=>e.value?te(e).width:0,c=F(()=>M(s.leftWidth)?+s.leftWidth:l(m)),v=F(()=>M(s.rightWidth)?+s.rightWidth:l(y)),b=e=>{t.offset=e==="left"?c.value:-v.value,n||(n=!0,h("open",{name:s.name,position:e}))},C=e=>{t.offset=0,n&&(n=!1,h("close",{name:s.name,position:e}))},T=e=>{const r=Math.abs(t.offset),i=.15,U=n?1-i:i,R=e==="left"?c.value:v.value;R&&r>R*U?b(e):C(e)},B=e=>{s.disabled||(d=t.offset,o.start(e))},a=e=>{if(s.disabled)return;const{deltaX:r}=o;o.move(e),o.isHorizontal()&&(u=!0,t.dragging=!0,(!n||r.value*d<0)&&oe(e,s.stopPropagation),t.offset=se(r.value+d,-v.value,c.value))},x=()=>{t.dragging&&(t.dragging=!1,T(t.offset>0?"left":"right"),setTimeout(()=>{u=!1},0))},E=(e="outside")=>{h("click",e),n&&!u&&ae(s.beforeClose,{args:[{name:s.name,position:e}],done:()=>C(e)})},D=(e,r)=>i=>{r&&i.stopPropagation(),E(e)},L=(e,r)=>{const i=f[e];if(i)return g("div",{ref:r,class:S(e),onClick:D(e,!0)},[i()])};return re({open:b,close:C}),Z(_,()=>E("outside"),{eventName:"touchstart"}),ee("touchmove",a,{target:_}),()=>{var e;const r={transform:`translate3d(${t.offset}px, 0, 0)`,transitionDuration:t.dragging?"0s":".6s"};return g("div",{ref:_,class:S(),onClick:D("cell",u),onTouchstartPassive:B,onTouchend:x,onTouchcancel:x},[g("div",{class:S("wrapper"),style:r},[L("left",m),(e=f.default)==null?void 0:e.call(f),L("right",y)])])}}});const _e=ne(he),ve={class:"self-comment"},Ce={class:"van-ellipsis"},ke={style:{float:"right"}},we=$({__name:"index",setup(s){const h=V(),f=O([]),n=p(!1),u=p(!1),d=p(!1),_=p(!1);let m=1;const y=()=>{J(m).then(o=>{u.value=o.totalPage===m||o.data.length==0||m==0,m=o.current+1,f.push(...o.data)}).catch(o=>{d.value=!0}).finally(()=>n.value=!1)},t=(o,l)=>{ue({title:"警告",message:"删除后不可恢复"}).then(()=>{X(l).then(c=>{G("删除成功！"),f.splice(o,1)}).catch(({message:c})=>K(c))})};return(o,l)=>{const c=ie,v=de,b=me,C=ce,T=_e,B=fe;return k(),H("div",ve,[g(c,{title:"评论记录",placeholder:"","left-arrow":"",onClickLeft:l[0]||(l[0]=a=>j(h).back())}),_.value?(k(),P(v,{key:0,description:"暂无阅读数据"})):(k(),P(B,{key:1,loading:n.value,"onUpdate:loading":l[1]||(l[1]=a=>n.value=a),finished:u.value,error:d.value,"onUpdate:error":l[2]||(l[2]=a=>d.value=a),"finished-text":"没有更多了",onLoad:y},{default:w(()=>[(k(!0),H(q,null,z(f,(a,x)=>(k(),P(T,null,{right:w(()=>[g(C,{onClick:E=>t(x,a.id),style:{height:"100%"},square:"",type:"danger",text:"删除"},null,8,["onClick"])]),default:w(()=>[g(b,{to:"/selfCommentInfo/"+a.id},{title:w(()=>[W("p",Ce,N(a.content),1)]),label:w(()=>[W("span",null,"发布时间："+N(a.createTime),1),W("span",ke,"点赞："+N(a.likeNum),1)]),_:2},1032,["to"])]),_:2},1024))),256))]),_:1},8,["loading","finished","error"]))])}}});const Le=A(we,[["__scopeId","data-v-abfac6e5"]]);export{Le as default};
