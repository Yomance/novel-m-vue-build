import{c as O,E as ce,d as ie,t as B,w as k,f as T,C as re,n as C,s as S,e as ue,r as X,i as j,ac as de,I as Z,p as K,h as fe,l as G,T as F,ad as ve,ae as ye,b as V,F as me,M as q,af as ge,J as he,H as be}from"./file-2a06de25.js";import{d as z,r as v,e as r,K as Se,x as R,O as J,L as Ie,i as Y,T as W,H as Q,I as ee,n as xe,J as Be,N as Ce,W as Pe,Z as Oe,F as ke,y as Te}from"./index-4fe7824b.js";const[te,M]=O("action-bar"),ne=Symbol(te),ze={placeholder:Boolean,safeAreaInsetBottom:B};var we=z({name:te,props:ze,setup(e,{slots:t}){const n=v(),i=ce(n,M),{linkChildren:a}=ie(ne);a();const o=()=>{var l;return r("div",{ref:n,class:[M(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(l=t.default)==null?void 0:l.call(t)])};return()=>e.placeholder?i(o):o()}});const lt=k(we);function oe(e){const t=Se();t&&T(t.proxy,e)}let Ae=2e3;const _e=()=>++Ae,[pe,A]=O("loading"),Ee=Array(12).fill(null).map((e,t)=>r("i",{class:A("line",String(t+1))},null)),De=r("svg",{class:A("circular"),viewBox:"25 25 50 50"},[r("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Le={size:C,type:S("circular"),color:String,vertical:Boolean,textSize:C,textColor:String};var Re=z({name:pe,props:Le,setup(e,{slots:t}){const n=R(()=>T({color:e.color},re(e.size))),i=()=>{const o=e.type==="spinner"?Ee:De;return r("span",{class:A("spinner",e.type),style:n.value},[t.icon?t.icon():o])},a=()=>{var o;if(t.default)return r("span",{class:A("text"),style:{fontSize:ue(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:l}=e;return r("div",{class:A([o,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[i(),a()])}}});const $e=k(Re),[Ne,P]=O("button"),Ke=T({},X,{tag:S("button"),text:String,icon:String,type:S("default"),size:S("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:S("button"),loadingSize:C,loadingText:String,loadingType:String,iconPosition:S("left")});var Ye=z({name:Ne,props:Ke,emits:["click"],setup(e,{emit:t,slots:n}){const i=j(),a=()=>n.loading?n.loading():r($e,{size:e.loadingSize,type:e.loadingType,class:P("loading")},null),o=()=>{if(e.loading)return a();if(n.icon)return r("div",{class:P("icon")},[n.icon()]);if(e.icon)return r(Z,{name:e.icon,class:P("icon"),classPrefix:e.iconPrefix},null)},l=()=>{let c;if(e.loading?c=e.loadingText:c=n.default?n.default():e.text,c)return r("span",{class:P("text")},[c])},s=()=>{const{color:c,plain:u}=e;if(c){const f={color:u?c:"white"};return u||(f.background=c),c.includes("gradient")?f.border=0:f.borderColor=c,f}},h=c=>{e.loading?K(c):e.disabled||(t("click",c),i())};return()=>{const{tag:c,type:u,size:f,block:I,round:y,plain:m,square:b,loading:g,disabled:_,hairline:p,nativeType:$,iconPosition:E}=e,D=[P([u,f,{plain:m,block:I,round:y,square:b,loading:g,disabled:_,hairline:p}]),{[de]:p}];return r(c,{type:$,class:D,style:s(),disabled:_,onClick:h},{default:()=>[r("div",{class:P("content")},[E==="left"&&o(),l(),E==="right"&&o()])]})}}});const Fe=k(Ye),[Me,He]=O("action-bar-button"),Ue=T({},X,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Xe=z({name:Me,props:Ue,setup(e,{slots:t}){const n=j(),{parent:i,index:a}=fe(ne),o=R(()=>{if(i){const s=i.children[a.value-1];return!(s&&"isButton"in s)}}),l=R(()=>{if(i){const s=i.children[a.value+1];return!(s&&"isButton"in s)}});return oe({isButton:!0}),()=>{const{type:s,icon:h,text:c,color:u,loading:f,disabled:I}=e;return r(Fe,{class:He([s,{last:l.value,first:o.value}]),size:"large",type:s,icon:h,color:u,loading:f,disabled:I,onClick:n},{default:()=>[t.default?t.default():c]})}}});const st=k(Xe),ae={show:Boolean,zIndex:C,overlay:B,duration:C,teleport:[String,Object],lockScroll:B,lazyRender:B,beforeClose:Function,overlayStyle:Object,overlayClass:G,transitionAppear:Boolean,closeOnClickOverlay:B},ct=Object.keys(ae);function je(e,t){return e>t?"horizontal":t>e?"vertical":""}function Ze(){const e=v(0),t=v(0),n=v(0),i=v(0),a=v(0),o=v(0),l=v(""),s=v(!0),h=()=>l.value==="vertical",c=()=>l.value==="horizontal",u=()=>{n.value=0,i.value=0,a.value=0,o.value=0,l.value="",s.value=!0};return{move:y=>{const m=y.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,i.value=m.clientY-t.value,a.value=Math.abs(n.value),o.value=Math.abs(i.value);const b=10;(!l.value||a.value<b&&o.value<b)&&(l.value=je(a.value,o.value)),s.value&&(a.value>F||o.value>F)&&(s.value=!1)},start:y=>{u(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:u,startX:e,startY:t,deltaX:n,deltaY:i,offsetX:a,offsetY:o,direction:l,isVertical:h,isHorizontal:c,isTap:s}}let w=0;const H="van-overflow-hidden";function Ge(e,t){const n=Ze(),i="01",a="10",o=u=>{n.move(u);const f=n.deltaY.value>0?a:i,I=ye(u.target,e.value),{scrollHeight:y,offsetHeight:m,scrollTop:b}=I;let g="11";b===0?g=m>=y?"00":"01":b+m>=y&&(g="10"),g!=="11"&&n.isVertical()&&!(parseInt(g,2)&parseInt(f,2))&&K(u,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",o,{passive:!1}),w||document.body.classList.add(H),w++},s=()=>{w&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",o),w--,w||document.body.classList.remove(H))},h=()=>t()&&l(),c=()=>t()&&s();ve(h),J(c),Ie(c),Y(t,u=>{u?l():s()})}function le(e){const t=v(!1);return Y(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Ve,qe]=O("overlay"),Je={show:Boolean,zIndex:C,duration:C,className:G,lockScroll:B,lazyRender:B,customStyle:Object};var We=z({name:Ve,props:Je,setup(e,{slots:t}){const n=v(),i=le(()=>e.show||!e.lazyRender),a=l=>{e.lockScroll&&K(l,!0)},o=i(()=>{var l;const s=T(me(e.zIndex),e.customStyle);return q(e.duration)&&(s.animationDuration=`${e.duration}s`),Q(r("div",{ref:n,style:s,class:[qe(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[ee,e.show]])});return V("touchmove",a,{target:n}),()=>r(W,{name:"van-fade",appear:!0},{default:o})}});const Qe=k(We),et=T({},ae,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[tt,U]=O("popup");var nt=z({name:tt,inheritAttrs:!1,props:et,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:i}){let a,o;const l=v(),s=v(),h=le(()=>e.show||!e.lazyRender),c=R(()=>{const d={zIndex:l.value};if(q(e.duration)){const x=e.position==="center"?"animationDuration":"transitionDuration";d[x]=`${e.duration}s`}return d}),u=()=>{a||(a=!0,l.value=e.zIndex!==void 0?+e.zIndex:_e(),t("open"))},f=()=>{a&&he(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},I=d=>{t("clickOverlay",d),e.closeOnClickOverlay&&f()},y=()=>{if(e.overlay)return r(Qe,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:I},{default:i["overlay-content"]})},m=d=>{t("clickCloseIcon",d),f()},b=()=>{if(e.closeable)return r(Z,{role:"button",tabindex:0,name:e.closeIcon,class:[U("close-icon",e.closeIconPosition),be],classPrefix:e.iconPrefix,onClick:m},null)};let g;const _=()=>{g&&clearTimeout(g),g=setTimeout(()=>{t("opened")})},p=()=>t("closed"),$=d=>t("keydown",d),E=h(()=>{var d;const{round:x,position:L,safeAreaInsetTop:N,safeAreaInsetBottom:se}=e;return Q(r("div",Te({ref:s,style:c.value,role:"dialog",tabindex:0,class:[U({round:x,[L]:L}),{"van-safe-area-top":N,"van-safe-area-bottom":se}],onKeydown:$},n),[(d=i.default)==null?void 0:d.call(i),b()]),[[ee,e.show]])}),D=()=>{const{position:d,transition:x,transitionAppear:L}=e,N=d==="center"?"van-fade":`van-popup-slide-${d}`;return r(W,{name:x||N,appear:L,onAfterEnter:_,onAfterLeave:p},{default:E})};return Y(()=>e.show,d=>{d&&!a&&(u(),n.tabindex===0&&xe(()=>{var x;(x=s.value)==null||x.focus()})),!d&&a&&(a=!1,t("close"))}),oe({popupRef:s}),Ge(s,()=>e.show&&e.lockScroll),V("popstate",()=>{e.closeOnPopstate&&(f(),o=!1)}),Be(()=>{e.show&&u()}),Ce(()=>{o&&(t("update:show",!0),o=!1)}),J(()=>{e.show&&e.teleport&&(f(),o=!0)}),Pe(ge,()=>e.show),()=>e.teleport?r(Oe,{to:e.teleport},{default:()=>[y(),D()]}):r(ke,null,[y(),D()])}});const it=k(nt);export{ne as A,Fe as B,$e as L,it as P,ae as a,st as b,lt as c,oe as d,ct as p,Ze as u};
