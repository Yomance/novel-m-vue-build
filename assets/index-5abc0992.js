import{d as F,e,y as L,n as O,_ as U,r as m,j as $,o as S,c as P,u as A,b as D,w as h,F as B,f as E,l as H,v as K}from"./index-b21a5062.js";import{u as j,a as I}from"./index-9167eec7.js";import{a as q}from"./pay-6e2074e9.js";import{c as G,f as R,t as k,o as J,s as M,q as Q,I as W,H as X,w as Y}from"./file-5968fc18.js";import{a as Z,p as ee,P as ne,L as te,B as ae}from"./index-1ab0a0de.js";import{N as oe}from"./index-b72d0545.js";import{S as le}from"./index-0f7f6841.js";import{s as se}from"./function-call-eb60fd77.js";import{C as ce}from"./index-7cf97704.js";import{F as re}from"./index-21612e1f.js";import{C as ie}from"./index-9b70e7c1.js";import"./use-id-c0295969.js";const[ue,l]=G("action-sheet"),de=R({},Z,{title:String,round:k,actions:J(),closeIcon:M("cross"),closeable:k,cancelText:String,description:String,closeOnPopstate:k,closeOnClickAction:Boolean,safeAreaInsetBottom:k}),pe=[...ee,"round","closeOnPopstate","safeAreaInsetBottom"];var me=F({name:ue,props:de,emits:["select","cancel","update:show"],setup(o,{slots:a,emit:u}){const d=n=>u("update:show",n),v=()=>{d(!1),u("cancel")},s=()=>{if(o.title)return e("div",{class:l("header")},[o.title,o.closeable&&e(W,{name:o.closeIcon,class:[l("close"),X],onClick:v},null)])},p=()=>{if(a.cancel||o.cancelText)return[e("div",{class:l("gap")},null),e("button",{type:"button",class:l("cancel"),onClick:v},[a.cancel?a.cancel():o.cancelText])]},g=(n,i)=>n.loading?e(te,{class:l("loading-icon")},null):a.action?a.action({action:n,index:i}):[e("span",{class:l("name")},[n.name]),n.subname&&e("div",{class:l("subname")},[n.subname])],C=(n,i)=>{const{color:b,loading:c,callback:t,disabled:f,className:_}=n,x=()=>{f||c||(t&&t(n),o.closeOnClickAction&&d(!1),O(()=>u("select",n,i)))};return e("button",{type:"button",style:{color:b},class:[l("item",{loading:c,disabled:f}),_],onClick:x},[g(n,i)])},y=()=>{if(o.description||a.description){const n=a.description?a.description():o.description;return e("div",{class:l("description")},[n])}};return()=>e(ne,L({class:l(),position:"bottom","onUpdate:show":d},Q(o,pe)),{default:()=>{var n;return[s(),y(),e("div",{class:l("content")},[o.actions.map(C),(n=a.default)==null?void 0:n.call(a)]),p()]}})}});const ve=Y(me);const fe={class:"pay"},_e={__name:"index",setup(o){const a=[10,20,30,50,100],u=m(!1),d=$(),v=j(),s=m(1),p=m(1),g=m("微信"),C=m(0),y=[{name:"微信"},{name:"支付宝"}],n=(c,t)=>{g.value=c.name,C.value=t},i=m(!1),b=()=>{if(s.value>6||s.value<0){se("请选择金额");return}i.value=!0;let c;s.value===0?c=p.value:c=a[s.value-1],q(c,C.value).then(t=>{v.purse.coin+=t,I({message:"购买成功"}).then(f=>d.back())}).catch(({message:t})=>I({title:"支付失败",message:t})).finally(()=>i.value=!1)};return(c,t)=>{const f=oe,_=ce,x=re,N=ie,T=ae,V=le,z=ve;return S(),P(B,null,[e(f,{title:"充值",placeholder:"","left-arrow":"",onClickLeft:t[0]||(t[0]=r=>A(d).back())}),D("div",fe,[e(V,{direction:"vertical",fill:"",size:16},{default:h(()=>[e(_,{title:"充值账号",size:"large",style:{padding:"15px 32px"},value:A(v).username},null,8,["value"]),e(_,{title:g.value,size:"large","is-link":"",style:{padding:"15px 32px"},onClick:t[1]||(t[1]=r=>u.value=!0)},null,8,["title"]),e(N,{inset:""},{default:h(()=>[(S(),P(B,null,E(a,(r,w)=>e(_,{class:K({active:s.value===w+1}),onClick:ge=>s.value=w+1,size:"large",title:r+"00硬币",value:"￥"+r},null,8,["class","onClick","title","value"])),64)),e(x,{onClick:t[2]||(t[2]=r=>s.value=0),type:"number",modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=r=>p.value=r),label:p.value*100+"硬币",placeholder:"输入自定义金额",maxlength:3},null,8,["modelValue","label"])]),_:1}),e(T,{type:"primary",block:"",style:{margin:"0 16px",width:"calc(100% - 40px)"},loading:i.value,onClick:b},{default:h(()=>[H(" 立即支付 ")]),_:1},8,["loading"])]),_:1}),e(z,{show:u.value,"onUpdate:show":t[4]||(t[4]=r=>u.value=r),actions:y,onSelect:n,"cancel-text":"取消","close-on-click-action":""},null,8,["show"])])],64)}}},Ne=U(_e,[["__scopeId","data-v-ad162f39"]]);export{Ne as default};
