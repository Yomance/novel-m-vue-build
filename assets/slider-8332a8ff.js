import{c as F,d as T,n as x,t as _,p as M,a0 as N,w as A,u as I}from"./file-2a06de25.js";import{d as U}from"./index-74f31b2d.js";import{d as B,e as D,J as L,Q as O,o as w,g as W,w as j,c as q,b as J,u as K,m as Q,T as R,_ as Y}from"./index-4fe7824b.js";import{g as b,h as u}from"./index-2f1714f2.js";const[$,z]=F("form"),G={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:x,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:_,showErrorMessage:_,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var H=B({name:$,props:G,emits:["submit","failed"],setup(a,{emit:l,slots:d}){const{children:n,linkChildren:i}=T(N),c=e=>e?n.filter(t=>e.includes(t.name)):n,m=e=>new Promise((t,s)=>{const r=[];c(e).reduce((V,k)=>V.then(()=>{if(!r.length)return k.validate().then(v=>{v&&r.push(v)})}),Promise.resolve()).then(()=>{r.length?s(r):t()})}),y=e=>new Promise((t,s)=>{const r=c(e);Promise.all(r.map(o=>o.validate())).then(o=>{o=o.filter(Boolean),o.length?s(o):t()})}),C=e=>{const t=n.find(s=>s.name===e);return t?new Promise((s,r)=>{t.validate().then(o=>{o?r(o):s()})}):Promise.reject()},f=e=>typeof e=="string"?C(e):a.validateFirst?m(e):y(e),E=e=>{typeof e=="string"&&(e=[e]),c(e).forEach(s=>{s.resetValidation()})},P=()=>n.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),g=(e,t)=>{n.some(s=>s.name===e?(s.$el.scrollIntoView(t),!0):!1)},p=()=>n.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),h=()=>{const e=p();f().then(()=>l("submit",e)).catch(t=>{l("failed",{values:e,errors:t}),a.scrollToError&&t[0].name&&g(t[0].name)})},S=e=>{M(e),h()};return i({props:a}),U({submit:h,validate:f,getValues:p,scrollToField:g,resetValidation:E,getValidationStatus:P}),()=>{var e;return D("form",{class:z(),onSubmit:S},[(e=d.default)==null?void 0:e.call(d)])}}});const re=A(H),X=b("/login/captcha/gen"),Z=b("/login/captcha/check"),ie=(a,l)=>u.post("/login/register/phoneCode",null,{params:{codeId:a,phone:l}}),ce=a=>u.post("/login/register",a),de=a=>u.post("/login",a),ue=()=>({phone:"17631424475",password:"",key:"",imageCode:""}),ee={key:0,class:"mask"},te=["src"],se=B({__name:"slider",props:{show:{type:Boolean,default:!1}},emits:["update:show","success"],setup(a,{emit:l}){function d({data:n}){var c;let i=n.state;i==="close"?l("update:show",!1):i==="success"?(setTimeout(()=>l("update:show",!1),300),l("success",n.value)):i==="getUrl"&&((c=document.getElementsByTagName("iframe")[0].contentWindow)==null||c.postMessage({gen:X,valid:Z},"*"))}return L(()=>window.addEventListener("message",d)),O(()=>window.removeEventListener("message",d)),(n,i)=>(w(),W(R,{name:"plus-icon"},{default:j(()=>[a.show?(w(),q("div",ee,[J("iframe",{id:"captcha",class:"slider",src:K(I)("/html/captcha-slider.html"),frameborder:"0"},null,8,te)])):Q("",!0)]),_:1}))}});const me=Y(se,[["__scopeId","data-v-ec077c56"]]);export{me as C,re as F,ue as g,de as l,ce as r,ie as s};
